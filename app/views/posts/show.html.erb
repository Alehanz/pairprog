<div class="row">
<div class="col-md-12">
  <div class="showpost">
    <table class="table">
      <tr>
        <th><h1><%= @post.title %></h1></th>
      </tr>
      <tr>
        <td><%= @post.description %></td>
      </tr>
    </table>
  </div>
  <div class="form-group">
    <% if current_user == @post.user %>
      <%= button_to "Edit", edit_post_path(@post), :method => :get, class: "btn btn-success pull-left" %>
    <% end %>
  </div>
  <div class="form-group">
    <%= link_to "Back", :back, class: "btn btn-success", style: "margin-left:8px;" %>
  </div>
  <%= form_for ([@post, @post.comments.build]) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <div class="form-group">
      <%= f.label :comment %>
      <%= f.bootsy_area :comment_body, class: "form-control", placeholder: "Max. 3000 characters" %>
      <%= f.hidden_field :post_id, :value => @post.id %>
    </div>

    <div class="form-group">
      <%= f.submit "Add Comment", class: "btn btn-success" %>
    </div>
  <% end %>
  <div class="col-md-12">
    <div class="showcomments">
      <h3>Comments</h3>
      <% @post.comments.each do |comment| %>
        <p><%= comment.user.username || comment.user.email if comment.user %></p>
        <p><%= comment.created_at %></p>
        <br />
        <p><%= comment.comment_body %></p>
        <% if comment.user_id == current_user.id %>
          <p><%= link_to "Delete", [comment.post, comment], method: :delete, data: { confirm: "Are you sure?" } %></p>
          <p><%= link_to "Edit", [:edit, comment.post, comment] %></p>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
</div>
